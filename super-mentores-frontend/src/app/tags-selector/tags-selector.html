<div class="tags-selector">
    <div class="mb-2">
        <input class="input input-bordered w-full" placeholder="Buscar tags..." [value]="query()" (input)="onQueryChange($event)" />
    </div>

    <div class="dropdown-content grid gap-2 max-h-40 overflow-auto">
        @for (tag of filtered(); track tag) {
            <div class="flex items-center gap-2">
                <label class="cursor-pointer flex items-center gap-2">
                    <input type="checkbox" [checked]="isSelected(tag)" (change)="toggle(tag)" class="checkbox" />
                    <span class="badge">{{tag}}</span>
                </label>
            </div>
        }
    </div>

    <div class="mt-3">
        @if (selected().length === 0) {
            <div class="text-sm text-muted">Nenhuma tag selecionada</div>
        } @else {
            <div class="flex flex-wrap gap-2">
                @for (t of selected(); track t) { <span class="badge badge-outline">{{t}}</span> }
            </div>
        }
    </div>
</div>